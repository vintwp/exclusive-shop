generator client {
  provider = "prisma-client-js"
  previewFeatures = ["prismaSchemaFolder"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  ADMIN
  USER
}

// default image - no-image.webp


// #region item

model Item {
  id                Int @id @default(autoincrement()) 
  name              String
  url               String
  price             Int
  priceDiscount     Int
  ourItem           Boolean @default(false) @map("our_item")
  category          Category @relation(fields: [categoryName], references: [name]) 
  categoryName      String @map("category_name")
  brand             Brand @relation(fields: [brandName], references: [name]) 
  brandName         String @map("brand_name")
  itemGroup         ItemGroup @relation(fields: [itemGroupName], references: [itemGroupName])
  itemGroupName     String
  itemOption        ItemOption[]
  itemStock         ItemStock?
  itemImage         ItemImage? @relation(fields: [itemImageId], references: [id])
  itemImageId       Int? @map("item_image_url")
  forSale           ItemForSales?
  bestSeller        ItemsBestSellers?
  itemSpecification ItemSpec?
  itemText          ItemText?

  createdAt     DateTime   @default(now()) @map("created_at")
  updatedAt     DateTime   @updatedAt @map("updated_at")
  
  @@map("item")
}

model ItemStock {
  id        Int   @id @default(autoincrement())
  stockQty  Int   @default(0)
  item      Item  @relation(fields: [itemId], references: [id])
  itemId    Int   @unique

  @@map("item_stock")
}

model ItemOption {
  id                    Int @id @default(autoincrement())
  item                  Item @relation(fields: [itemId], references: [id])
  itemId                Int
  optionName            String @map("option_name")
  optionValue           String @map("option_value")
  optionValueExtended   String? @default("")
}

model ItemColorOption {
  colorName     String
  colorIconUrl  String

  @@id([colorName])  
}

model ItemGroup {
  id                Int @id @default(autoincrement())
  itemGroupName     String @map("item_group_name") @unique
  items             Item[]
  createdAt         DateTime   @default(now()) @map("created_at")
  updatedAt         DateTime   @updatedAt @map("updated_at")
	@@map("item_group")
}




// model ItemGroup {
//   id                Int @id @default(autoincrement())
//   itemGroupName     String @unique @map("item_group_name")
//   items             Item[]
//   createdAt         DateTime   @default(now()) @map("created_at")
//   updatedAt         DateTime   @updatedAt @map("updated_at")
// 	@@map("item_group")
// }

model ItemGroupProp {
  id    Int @id @default(autoincrement())
  name  String @map("group_name")

  createdAt         DateTime   @default(now()) @map("created_at")
  updatedAt         DateTime   @updatedAt @map("updated_at")
	@@map("item_group_property")
}

model ItemGroupValue {
  id    Int @id @default(autoincrement())
  name  String @map("group_name")
  createdAt         DateTime   @default(now()) @map("created_at")
  updatedAt         DateTime   @updatedAt @map("updated_at")
	@@map("item_group_value")
}


model ItemImage {
  id          Int @id @default(autoincrement())
  images      String[] @map("image_url")
  item        Item[]
  createdAt   DateTime   @default(now()) @map("created_at")
  updatedAt   DateTime   @updatedAt @map("updated_at")
	@@map("item_image")
}

model ItemSpec {
  id              Int @id @default(autoincrement())
  specification   Json @map("item_specs")
  item            Item  @relation(fields: [itemId], references: [id])
  itemId          Int   @unique
  @@map("item_specification")
}

model ItemText {
  id      Int @id @default(autoincrement())
  text    Json
  item    Item  @relation(fields: [itemId], references: [id])
  itemId  Int   @unique

  @@map("item_text")
}

model ItemForSales {
  id      Int   @id @default(autoincrement())
  item    Item  @relation(fields: [itemId], references: [id])
  itemId  Int   @unique 

  @@map("items_for_sales")
}

model ItemsBestSellers {
  id      Int   @id @default(autoincrement())
  item    Item  @relation(fields: [itemId], references: [id])
  itemId  Int   @unique

  @@map("items_best_sellers")
}

// #endregion




